{% extends "layout.html" %}

{% block page_content %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/pages/common.css') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='css/pages/software.css') }}">

<div class="our-team-section">
  <div class="gradient"></div>
  <div class="overlay-text">
    <h3>LAB</h3>
    <h1>MODEL</h1>
  </div>
</div>


<div class="stage">
  <div class="layout">

    <!-- 左侧导航 -->
    <aside class="sidebar">
      <div class="indicator" id="indicator"></div>
      <div class="sidebar-inner">
        <h3 class="side-title">OVERVIEW</h3>

        <!-- Content Start -->
        <nav>
          <ul class="menu" id="menu">
            <li><a class="navlink" href="#description">DESCRIPTION</a></li>
            <li><a class="navlink" href="#model1">MODEL 1</a></li>
            <li><a class="navlink" href="#model2">MODEL 2</a></li>
            <li><a class="navlink" href="#model3">MODEL 3</a></li>
          </ul>
        </nav>
      </div>
    </aside>

    <!-- 右侧正文 -->
    <main class="content">
      <div class="paper">

        <!-- ID：introduction -->
        <section id="introduction">
          <h1>DESCRIPTION</h1>
          <p class="sub">Our modeling work is systematically carried out along the logical chain of "Light-Fluid-Bacteria":</p>
          <ol>
            <li>First, a <strong style="color:#9c7b3f;">Mie scattering-refractive index fluctuation coupling model</strong> is constructed to quantify the dynamic light intensity attenuation in the weak turbulent environment of the Archimedean screw, providing accurate dosages for subsequent optical regulation.</li>
            <li>A <strong style="color:#9c7b3f;">7-compartment diffusion-mass transfer equation</strong> is used to describe the cross-barrier mass transfer process of engineered bacteria in fish bodies, converting the light-controlled bacterial quantity into immune endpoints of compartment equilibrium through model language.</li>
            <li>A <strong style="color:#9c7b3f;">green/blue/red three-color photogenetic circuit</strong> activated by NIR (Near-Infrared Radiation) is designed, and a two-component kinase-response regulatory network is utilized to achieve instantaneous, reversible, and saturated control of the swimming mode of Escherichia coli.</li>
          </ol>
          <p class="sub">The three modules are sequentially connected, covering three scales of photon-fluid-bacteria, and comprehensively explain the vaccine immunization results of the screw device innovatively developed by us.</p>
          <p class="sub">The modeling methods span classical mass transfer equations, bacterial kinetics, machine learning, Monte Carlo simulation, and other approaches. They provide a quantitative solution for "optical regulation-live bacteria delivery-aquatic immunity" and solve the modeling challenge of difficult quantification of bacterial indicators in aquatic immunity.</p>
          <!-- Video 1 -->
          <div class="video-container">
            <video controls>
              <source src="/static/upload/page/model/modelvideo1.mp4" type="video/mp4">
              Your browser does not support the video tag.
            </video>
        </section>
      
        <!-- ID：model1 -->
        <section id="model1">
          <h1>Modeling and Analysis of Light Transmission Characteristics Based on Mie Scattering and Refractive Index Fluctuation Model</h1>
          <p class="sub">This model mainly constructs a mathematical model of light intensity attenuation for Edwardsiella vaccine solution in a weak turbulence system to analyze and predict the transmission behavior of light in the Edwardsiella vaccine solution. The model combines the Mie scattering theory (for particle scattering) and the refractive index fluctuation model (for turbulence scattering), and extends the model to a time-varying form for the dynamic environment of the Archimedes screw system. Numerical methods such as Monte Carlo and Runge-Kutta are used for solving, the light intensity attenuation characteristics are systematically analyzed, and the key influencing parameters are determined using Sobol global sensitivity analysis. The research provides important theoretical basis and design guidance for optimizing the optical detection and therapeutic technologies of vaccines.</p>
          
          <h3>1.Overview of Model Meaning</h3>
          <p class="sub">The study of light transmission characteristics in turbid media is an important topic in fields such as bio-optics, atmospheric physics, and ocean optics. Especially in the Edwardsiella vaccine solution system, the light transmission process is comprehensively affected by microbial particle scattering and turbulence effects, showing complex attenuation and polarization characteristics. The Mie scattering theory provides a strict mathematical basis for analyzing the scattering phenomenon when the particle size is comparable to the wavelength of light, while the refractive index fluctuation model well describes the random scattering effect caused by turbulence. This paper will combine these two theories to establish a complete light transmission model, solve it using numerical methods, and finally display the variation law of light transmission characteristics with various parameters through visualization methods. This study aims to construct a mathematical model that can accurately predict the transmission behavior of light in the Edwardsiella vaccine solution, providing a theoretical basis for optimizing vaccine optical detection methods and developing new optical therapeutic technologies. The model not only considers the scattering and absorption of microbial particles but also introduces the influence of turbulence effects, making the model more in line with practical application scenarios. Through systematic parameter research and visual analysis, this paper reveals the key physical mechanisms and laws in the light transmission process. </p>

          <h3>2 Model Establishment and Mathematical Expression </h3>
          <h4>2.1 Mie Scattering Theory Model </h4>
          <p class="sub">The Mie scattering theory is a strict mathematical solution describing the scattering effect of uniform spherical particles on electromagnetic waves, whose core is to solve the boundary condition problem of Maxwell's equations in the spherical coordinate system. For microbial particles in the Edwardsiella vaccine solution, when their size is comparable to the wavelength of near-infrared light, the Mie theory can describe the light scattering phenomenon more accurately than the Rayleigh scattering theory.<strong style="color:#9c7b3f;">Scattering efficiency factor</strong> is a core parameter of the Mie theory, expressed as:</p>
          <img src="/static/upload/page/model/formula1.png" alt="formula1">
          <p class="sub">Among them, <img src="/static/upload/page/model/formula2.png" alt="formula2" style="display: inline !important; margin: 0 2px !important; vertical-align: middle !important;"> is the size parameter, is the particle radius, and is the wavelength of incident light.​and ​are the Mie coefficients, which are closely related to the complex refractive index of the particles.</p>
          <p class="sub">​​The <strong style="color:#9c7b3f;">scattering phase function</strong> describes the angular distribution characteristics of light after scattering, and is approximately expressed using the Henvey-Greenstein phase function:</p>
        </section>

        <!-- ID：architecture -->
        <section id="architecture">
          <h1>System Architecture</h1>
          <p class="sub">To support the high-reliability, high-intelligence, and high-collaboration design goals of
            the "Smart Vac" system, we architected an advanced, decoupled, three-layer collaborative IoT framework,
            as illustrated in Figure 1. This architecture distinctly separates real-time and non-real-time tasks,
            ensuring both the ultra-low latency of local control and the powerful analytical capabilities of cloud
            services. The overall design balances system stability, scalability, and security.</p>

          <h4>The core of this architecture is composed of three tightly integrated layers. </h4>
          <p class="sub">1.The Perception & Control Layer, acting as the system's on-site "brain", consists of a
            Siemens S7-1214C PLC controller and various high-precision sensors, responsible for the most critical
            real-time data acquisition and autonomous device control. Sensor data is transmitted at high speed via
            the industrial-grade Snap7 protocol to the edge control software. Developed on the robust Qt framework,
            this software runs directly on a local industrial host, enabling direct command issuance to the PLC. The
            primary advantage of this design is its ability to guarantee the autonomous and stable operation of the
            core production process even under extreme conditions, such as a network outage.</p>

          <p class="sub">2.The Application & Interaction Layer is the system's "window" to the user, dedicated to
            providing an intuitive and accessible remote control and data insight experience from anywhere, at any
            time. Its core is the cross-platform control software based on the uni-app framework. We chose uni-app
            for its "code once, deploy anywhere" capability, which significantly enhanced development efficiency and
            ensured a consistent user experience across different platforms.</p>

          <p class="sub">3.At the apex of the architecture is the Decision & Intelligence Layer, the wellspring of
            the system's "intelligence". It operates independently of the core control loop, focusing on
            transforming data into decisions. The cloud-deployed machine vision models invoke vast amounts of
            historical data to perform inference and issue high-level directives, such as "prohibit inoculation" or
            "optimize fish separation frequency". These commands are then relayed to the control layer for
            execution, forming a complete, intelligent loop of "Data-Analysis-Decision-Execution".</p>
        </section>

        <!-- ID：implementation -->
        <section id="implementation">
          <h1>Software Implementation</h1>
          <p class="sub">Guided by a clear architecture, we translated our layered design blueprint into a suite of
            powerful and user-friendly software applications. Our implementation focused on providing two distinct
            operational experiences: first, stable and reliable core control at the edge, and second, flexible and
            convenient mobile collaborative management in the cloud.</p>

          <h4>1. Edge Control Software: The Localized, High-Reliability Interaction Core </h4>
          <p class="sub">As the primary interface for direct equipment interaction, we implemented this high-performance
            edge control software based on the Qt framework. Its main interface is a highly integrated "digital
            cockpit", as shown in Figure 2. Here, operators can gain a comprehensive real-time overview of the dynamic
            values of six core parameters, including temperature, salinity, and vaccine concentration, while also
            intuitively grasping the device's operational status and the latest event list to ensure immediate
            situational awareness. For in-depth control, the software integrates four task-oriented, independent
            sub-menus (as shown in Figures 2):</p>
          <img src="/static/upload/page/software/software2.png" alt="software2">
          <p class="figurecaption">Figure 2</p>


          <p class="sub">1.1 The Parameter Calibration module allows users to precisely define setpoints (SV) for
            various variables and observe their process values (PV).</p>
          <p class="sub">1.2 The Data Curves module visualizes historical data of key parameters for traceability and
            analysis</p>
          <p class="sub">1.3 The Vaccine Configuration module provides a procedural interface to mitigate operational
            errors.</p>
          <p class="sub">1.4 The Alarm Query module automatically logs all abnormal events, providing a critical basis
            for troubleshooting.</p>

          <h4>2. Cross-Platform Control Software: The Mobile, Scalable Management Hub</h4>

          <p class="sub">The cross-platform control software, based on the uni-app framework, resides in the Application
            and Interaction Layer and serves as the core portal for users to achieve remote monitoring and management.
            Its implementation aims to seamlessly extend the powerful control capabilities of the edge to mobile smart
            devices and to expand functionality to meet more complex management needs. To ensure a consistent user
            experience, we replicated all the core functionalities of the edge software on the mobile client—such as
            Data Calibration, Event List, Vaccine Configuration, and Historical Data query—while optimizing them for
            mobile interaction characteristics.</p>
          <p class="sub">The most significant innovation of this software is the implementation of a powerful "My
            Devices" management module, which completely overcomes the one-to-one control limitation of the edge
            software. As illustrated, within the "My" page, users have permissions to "Add Device" and "Manage Devices,"
            allowing them to bring all their "Smart Vac" units under unified management. The device list clearly
            displays the ID and status of each unit. With a simple tap, users can quickly switch their control focus
            between different devices, dramatically enhancing management efficiency and collaborative capabilities in
            multi-device scenarios.</p>
          <p class="sub">Finally, the interface and functions of this software are as shown in Video 1.</p>
          <!-- Video 1 -->
          <div class="video-container">
            <video controls>
              <source src="/static/upload/page/software/video1.mp4" type="video/mp4">
              Your browser does not support the video tag.
            </video>
          </div>
        </section>

        <!-- ID：machine-->
        <section id="machine">
          <h1>Machine Vision Model</h1>
          <p class="sub">The machine vision model is the core of the "Smart Vac" system's intelligent perception,
            responsible for transforming raw image information into structured, decision-ready biological status data.
            The entire model is composed of a cascade of two stages: image pre-processing and the core perception
            network.</p>
          <img class="formula" src="/static/upload/page/software/formula1.png" alt="formula1">
          <p class="sub">I(x) is the observed hazy image, J(x) is the desired clear image, A is the global atmospheric
            light, and t(x) is the transmission map. Based on the prior assumption that "in most non-sky local regions,
            at least one color channel has some pixels with very low intensity," the algorithm can effectively estimate
            the atmospheric light and transmission map, ultimately solving for the clear image </p>
          <p class="sub">J(x) via inversion. This provides high-quality input for the subsequent training of the vision
            model.</p>

          <h4>2. Core Perception Model & Performance Validation </h4>
          <p class="sub">Serving as the system's "eyes," we built a deeply customized VoVNet instance segmentation
            network based on the Mask R-CNN framework. Its backbone utilizes the high-efficiency VoVNet, the core of
            which is the One-Shot Aggregation (OSA) module (Figure 3). Unlike traditional networks, it aggregates all
            preceding features at the end of the unit, significantly improving computational efficiency and making it
            particularly suitable for real-time tasks. To further optimize performance, we employed Depthwise Separable
            Convolution to reduce computational complexity and integrated the eSE attention mechanism, which allows the
            network to adaptively focus on more informative feature channels through a three-step
            "Squeeze-Excitation-Rescale" process.</p>
          <p class="sub">The model demonstrates exceptional performance. As shown by the inference results (Figure 4),
            the model can accurately identify and precisely segment the contours of both individual 'Infectedfish' and
            'Freshfish' with nearly 100% confidence. Even in complex scenarios with dense fish populations and partial
            occlusion, the model remains robust, successfully detecting multiple targets with high confidence scores.
            The training loss curve ( Figure 5) shows that the model's total loss rapidly decreases with increasing
            iterations, eventually converging stably around 0.06. Ultimately, the model achieved an Average Precision
            (AP) of 85.7%, a key metric for evaluating object detection performance.</p>


          <img src="/static/upload/page/software/software3.png" alt="software3">
          <p class="figurecaption">Figure 3</p>
          <img src="/static/upload/page/software/software4.png" alt="software4">
          <p class="figurecaption">Figure 4</p>
          <img src="/static/upload/page/software/software5.png" alt="software5">
          <p class="figurecaption">Figure 5</p>

          <h4>2. Core Perception Model & Performance Validation </h4>
          <p class="sub">In the inference stage, we leverage the pre-trained static perception model as a frame-by-frame
            "observation data source" and cascade it with a dynamic spatio-temporal analysis model. This elevates the
            system from a static "image analyzer" to a "video analysis system" capable of understanding the temporal
            behavior of objects.</p>
          <p class="sub">3.1Data Association and Optimal Assignment:</p>
          <p class="sub">This is the core of the tracking algorithm, for which we adopt the classic
            Tracking-by-Detection paradigm. To address the central challenge of associating detections in the current
            frame with existing historical trajectories, we first construct a cost matrix. The elements of this matrix
            are derived from the Intersection over Union (IoU), which is mathematically defined as:</p>
          <img class="formula" style="height: 70px;" src="/static/upload/page/software/formula2.png" alt="formula2">
          <p class="sub">Subsequently, we employ a solver based on the Hungarian algorithm to find the globally optimal
            assignment for the cost matrix. This process matches each historical trajectory to a unique new detection
            with the minimum possible total cost, thereby maintaining identity consistency across frames.</p>

          <p class="sub">3.2 Trajectory State Smoothing:</p>
          <!-- Video 2 -->
          <div class="video-container">
            <video controls>
              <source src="/static/upload/page/software/video2.mp4" type="video/mp4">
              Your browser does not support the video tag.
            </video>
          </div>
          <p class="sub">To ensure that the object's tracked trajectory is visually coherent and free from jitter, we
            apply an Exponential Moving Average (EMA) model to smooth the bounding box positions. Its mathematical
            expression is:"S" _"t" "=α⋅" "Y" _"t" "+(1-α)⋅" "S" _"t-1" ,Here, St represents the smoothed coordinates in
            the current frame, Yt are the raw detected coordinates in the current frame, St−1 are the smoothed
            coordinates from the previous frame, and α is the smoothing factor, which determines the degree of smoothing
            and the responsiveness to new observations.</p>

        </section>

        <!-- ID：control-->
        <section id="control">
          <h1>Control System Model</h1>
          <p class="sub">To achieve ultra-high-precision and stable control of key environmental parameters during the
            vaccine production process, we have designed an advanced multi-variable, multi-strategy intelligent control
            system. This system tailors optimal composite control strategies for the unique dynamic characteristics
            (e.g., non-linearity, time-delay, actuator coupling) of different controlled variables, such as temperature,
            dissolved oxygen, and pH. This approach allows for the construction of a highly efficient, robust, and
            intelligent control core. The table below presents the variables we need to control and their requirements.
          </p>
          <img class="formula" style="height: 210px; padding-bottom: 20px;"
            src="/static/upload/page/software/formula3.png" alt="formula3">

          <h4>1. Temperature Control: A Hybrid Intelligent Strategy with Neural Networks and Feedforward Compensation:
          </h4>
          <p class="sub">Recognizing that temperature is a critical variable with the slowest response and strongest
            non-linearity, we designed a hybrid intelligent control scheme combining adaptive feedback with predictive
            feedforward. At its core is an adaptive PID controller based on a Back-Propagation (BP) Neural Network. This
            network, with a 4-7-3 architecture, not only uses the conventional error e(k) and error rate de(k) as inputs
            but also innovatively incorporates measurable disturbances like coolant flow rate F(k) and inlet temperature
            Tin(k), endowing the controller with predictive adjustment capabilities. Through online learning, the
            network can perform real-time, dynamic self-tuning of the PID parameters (Kp,Ki,Kd) to adapt to the
            reactor's changing dynamics under various operating conditions.</p>
          <p class="sub">To further enhance performance, we introduced a Hybrid Feedforward Compensator (HFF) to
            proactively and rapidly counteract external disturbances. This compensator includes: a static feedforward
            component based on the system's steady-state energy balance equation to compensate for measurable
            disturbances; and a dynamic feedforward component based on a disturbance observer, which compensates for
            unmeasurable disturbances and model uncertainties by estimating a "lumped disturbance term" online.</p>

          <h4>2. Dissolved Oxygen, pH, and Salinity Control: A Two-Degree-of-Freedom PID Decoupling Strategy:</h4>
          <p class="sub">For variables like dissolved oxygen, pH, and salinity, which require a simultaneous balance
            between fast setpoint tracking and robust disturbance rejection, we employed a Two-Degree-of-Freedom PID
            (2DOF-PID) controller. A conventional PID controller faces an inherent trade-off between these two
            performance objectives. The 2DOF-PID successfully decouples these functions by introducing additional
            setpoint weighting factors, b and c, on the proportional and derivative terms. This allows us to
            independently optimize the controller's response to setpoint changes and external disturbances, achieving
            smoother, overshoot-free setpoint tracking without sacrificing disturbance rejection capability. Its control
            law is given by the following equation, where R(s) is the setpoint and Y(s) is the measured output:</p>

          <img class="formula" style="height: 70px;" src="/static/upload/page/software/formula4.png" alt="formula4">
          <h4>3. Controller Parameter Tuning</h4>
          <p class="sub">To ensure optimal controller performance, we used the MOMI analytical method to obtain initial
            values for the PID parameters. This method is based on an open-loop step response, from which multiple
            integral areas Ai under the response curve are calculated. The PID parameters are then determined using the
            following formulas:</p>

          <img class="formula" style="height: 240px;" src="/static/upload/page/software/formula5.png" alt="formula5">

          <p class="sub">The simulation architecture in Figure 5 clearly illustrates the complete closed-loop process of
            this multi-variable control system, including setpoint generation, parallel operation of multiple
            controllers, the reactor model, and signal feedback.</p>
          <img src="/static/upload/page/software/software6.png" alt="software6">
          <p class="figurecaption">Figure 6</p>
          <div class="usage">
            <h4>Reference Files</h4>
            <p>
            <h5><a href="/static/upload/page/software/md1.md" target="_blank">md-1</a></h5>
            <h5><a href="/static/upload/page/software/md2.md" target="_blank">md-2</a></h5>
            <h5><a href="/static/upload/page/software/md3.md" target="_blank">md-3</a></h5>
            </p>
          </div>
        </section>

        <!-- ID: conclusion -->
        <section id="conclusion">
          <h1>CONCLUSION</h1>
          <p class="sub">Focusing on our project plan, we have successfully achieved breakthroughs in key technical
            areas, delivering an integrated software solution that spans from low-level real-time control to high-level
            intelligent decision-making. This system not only validates the feasibility of combining high-reliability
            edge computing with high-flexibility cloud management but also integrates preliminary deep learning-based
            computer vision models and a multi-variable control system founded on advanced process control theory.
            Collectively, this work lays a solid technical foundation for realizing the vision of an intelligent
            traditional vaccination process.</p>

          <p class="sub">Commercial bioprocess automation software often presents challenges such as high costs and
            proprietary systems, which can limit its widespread adoption in academic research. In contrast, the "Smart
            Vac" system is built upon a modular architecture and mainstream open-source technologies, aiming to enhance
            its scalability and portability. It is our hope that future iGEM teams and other research projects can adapt
            our vision algorithms, control models, or system architecture for novel bioprocess automation scenarios,
            which could in turn increase the project's reuse value and contribute to the iGEM community.</p>


          <p class="sub">In summary, the significance of the "Smart Vac" system extends beyond providing an open-source,
            reusable tool for academic research. More importantly, it serves as an exploratory paradigm, demonstrating
            how cutting-edge information technologies like IoT, edge computing, and machine learning can be deeply
            integrated with applications in synthetic biology. Through this integration, we have elevated a traditional,
            labor-intensive bioprocess into a highly efficient, precise, and traceable digital production paradigm,
            showcasing significant potential for enhancing production efficiency, process stability, and data
            traceability. Therefore, this project is more than an effective attempt to solve a specific problem; it
            provides a field-tested, robust, and open engineering blueprint for the future development of smart
            agriculture and automated biotechnology.</p>
        </section>

        <div class="logo-ring"></div>

      </div>
    </main>
    {% endblock %}